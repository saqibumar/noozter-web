{"ast":null,"code":"import { AllNoozService } from './all-nooz.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\nimport { DomSanitizer } from '@angular/platform-browser';\n// import { ToastrService } from \"src/app/services/toastr.service\";\nimport { ToastrService } from 'ngx-toastr';\nimport { Meta, Title } from '@angular/platform-browser';\nimport { getName } from 'country-list';\nimport * as moment from 'moment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./all-nooz.service\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/platform-browser\";\nimport * as i5 from \"ngx-toastr\";\nfunction AllNoozComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AllNoozComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"a\", 10)(2, \"div\", 11)(3, \"div\", 4)(4, \"div\", 12);\n    i0.ɵɵelement(5, \"img\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 14)(7, \"i\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelement(9, \"img\", 15)(10, \"br\");\n    i0.ɵɵelementStart(11, \"u\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(13, \"br\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementStart(15, \"a\", 16);\n    i0.ɵɵtext(16, \"Continue reading...\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(17, \"div\", 17);\n    i0.ɵɵelement(18, \"hr\", 18);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const nooz_r7 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate2(\"routerLink\", \"/nooz/\", nooz_r7.NoozId, \"/\", ctx_r1.selectedCountryCode, \"/x\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"src\", nooz_r7.MediaUri, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", nooz_r7.UserDisplayName, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"src\", nooz_r7.ProfilePictureUri, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.formatDate(nooz_r7.CreatedDate));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", nooz_r7.Blurb.substring(0, 120), \"... \");\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate2(\"routerLink\", \"/nooz/\", nooz_r7.NoozId, \"/\", ctx_r1.selectedCountryCode, \"/x\");\n  }\n}\nfunction AllNoozComponent_input_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 19);\n    i0.ɵɵlistener(\"click\", function AllNoozComponent_input_5_Template_input_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.loadPrev());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r2.isLoading || ctx_r2.pageNumber <= 1);\n  }\n}\nfunction AllNoozComponent_input_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 20);\n    i0.ɵɵlistener(\"click\", function AllNoozComponent_input_6_Template_input_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.loadMore());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r3.isLoading || ctx_r3.AllNooz.length < 50);\n  }\n}\nfunction AllNoozComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \" No more nooz available for the selected country \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AllNoozComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h1\");\n    i0.ɵɵtext(2, \"Checkout daily nooz! Select a country below to see the nooz.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AllNoozComponent_div_11_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cc_r13 = i0.ɵɵnextContext().$implicit;\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate2(\"routerLink\", \"\", ctx_r15.currentRoute, \"/\", cc_r13, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r15.GetCountryName(cc_r13), \" \");\n  }\n}\nfunction AllNoozComponent_div_11_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cc_r13 = i0.ɵɵnextContext().$implicit;\n    const ctx_r16 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r16.GetCountryName(cc_r13), \" \");\n  }\n}\nfunction AllNoozComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtemplate(1, AllNoozComponent_div_11_a_1_Template, 2, 3, \"a\", 23)(2, AllNoozComponent_div_11_div_2_Template, 2, 1, \"div\", 1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r14 = ctx.index;\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.countryIndex !== i_r14);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.countryIndex === i_r14);\n  }\n}\nexport let AllNoozComponent = /*#__PURE__*/(() => {\n  class AllNoozComponent {\n    constructor(noozSvc, http, route, sanitizer, toastr, title, meta, router //private moment: Moment\n    ) {\n      this.noozSvc = noozSvc;\n      this.http = http;\n      this.route = route;\n      this.sanitizer = sanitizer;\n      this.toastr = toastr;\n      this.title = title;\n      this.meta = meta;\n      this.router = router;\n      this.AllNooz = [];\n      this.isLoading = false;\n      this.countryCodes = ['LY', 'BR', 'US', 'CO', 'LB', 'FR', 'CR', 'AU', 'RU', 'MX', 'PK', 'JP', 'TH', 'CH', 'ES', 'OM', 'CA', 'IE', 'AE', 'UK', 'TR', 'CN', 'IT', 'SA', 'GB'];\n    }\n    ngOnInit() {\n      this.countryCodes = this.countryCodes.sort(function (a, b) {\n        var textA = a.toUpperCase();\n        var textB = b.toUpperCase();\n        return textA < textB ? -1 : textA > textB ? 1 : 0;\n      });\n      //console.log(this.countryCodes);\n      let countryCode;\n      this.route.params.subscribe(params => {\n        // console.log(params);\n        // console.log(this.router.url, window.location.pathname);\n        countryCode = params.countryCode;\n        if (countryCode) {\n          this.selectedCountryCode = countryCode;\n          this.isLoading = true;\n          this.pageNumber = 1;\n          this.pageSize = 50;\n          this.GetSelectedCountryNooz(countryCode);\n        }\n        const index = this.countryCodes.indexOf(countryCode, 0);\n        this.countryIndex = index;\n        /* if (index > -1) {\n          this.countryCodes.splice(index, 1);\n        }\n         */\n        // console.log(getName(countryCode));\n      });\n      this.currentRoute = this.router.url.replace(countryCode, '');\n    }\n    GetSelectedCountryNooz(countryCode) {\n      // console.log(\">>>>>>>>>\", this.AllNooz);\n      this.noozSvc.getAllNooz(countryCode, this.pageNumber, this.pageSize).subscribe(data => {\n        // console.log(data);\n        this.isLoading = false;\n        this.AllNooz = data.Items;\n        //this.AllNooz.push(data.Items);\n        // console.log(\">>>>>>>>>\", this.AllNooz[0]);\n      }, error => {\n        //console.log(\"Error: \", error);\n        this.toastr.error('Unable to fetch.');\n        this.isLoading = false;\n      }, () => {\n        //to keep mp4 video on top\n        //this.NoozMedias = this.array_move(this.NoozMedias);\n        if (this.AllNooz.length < 50) {\n          this.toastr.info('No more nooz available for the selected country');\n        }\n        // console.log(\"api call finished\");\n      });\n    }\n    GetCountryName(countryCode) {\n      return getName(countryCode);\n    }\n    formatDate(d) {\n      return moment(d).format('MMM DD, YYYY @hh:mm:ss a');\n    }\n    loadMore() {\n      this.pageNumber += this.pageSize;\n      this.isLoading = true;\n      this.GetSelectedCountryNooz(this.selectedCountryCode);\n    }\n    loadPrev() {\n      this.pageNumber -= this.pageSize;\n      // console.log(this.pageNumber);\n      this.isLoading = true;\n      this.GetSelectedCountryNooz(this.selectedCountryCode);\n    }\n    static #_ = this.ɵfac = function AllNoozComponent_Factory(t) {\n      return new (t || AllNoozComponent)(i0.ɵɵdirectiveInject(i1.AllNoozService), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.DomSanitizer), i0.ɵɵdirectiveInject(i5.ToastrService), i0.ɵɵdirectiveInject(i4.Title), i0.ɵɵdirectiveInject(i4.Meta), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AllNoozComponent,\n      selectors: [[\"app-all-nooz\"]],\n      decls: 12,\n      vars: 7,\n      consts: [[\"Xstyle\", \"overflow: auto;padding-bottom:100px;\", 1, \"container\", \"body\"], [4, \"ngIf\"], [1, \"content\"], [\"class\", \"row\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\"], [\"type\", \"button\", \"class\", \"col-3\", \"value\", \"Previous...\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"col-3\", \"value\", \"Load more...\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"style\", \"color: red\", \"class\", \"col-12\", 4, \"ngIf\"], [2, \"border\", \"1px solid green\", \"border-radius\", \"5px\", \"width\", \"100%\"], [\"class\", \"col-sm-4 col-md-4 col-lg-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"aLinkNoStyle\", 3, \"routerLink\"], [1, \"col-sm-12\", \"col-md-12\", \"col-lg-12\"], [1, \"col-4\"], [3, \"src\"], [1, \"col-8\"], [1, \"profilePic\", 3, \"src\"], [3, \"routerLink\"], [1, \"col-12\"], [2, \"border\", \"0.3px solid silver\", \"border-radius\", \"5px\", \"width\", \"100%\"], [\"type\", \"button\", \"value\", \"Previous...\", 1, \"col-3\", 3, \"disabled\", \"click\"], [\"type\", \"button\", \"value\", \"Load more...\", 1, \"col-3\", 3, \"disabled\", \"click\"], [1, \"col-12\", 2, \"color\", \"red\"], [1, \"col-sm-4\", \"col-md-4\", \"col-lg-4\"], [3, \"routerLink\", 4, \"ngIf\"]],\n      template: function AllNoozComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, AllNoozComponent_div_1_Template, 2, 0, \"div\", 1);\n          i0.ɵɵelementStart(2, \"div\", 2);\n          i0.ɵɵtemplate(3, AllNoozComponent_div_3_Template, 19, 9, \"div\", 3);\n          i0.ɵɵelementStart(4, \"div\", 4);\n          i0.ɵɵtemplate(5, AllNoozComponent_input_5_Template, 1, 1, \"input\", 5)(6, AllNoozComponent_input_6_Template, 1, 1, \"input\", 6)(7, AllNoozComponent_div_7_Template, 2, 0, \"div\", 7)(8, AllNoozComponent_div_8_Template, 3, 0, \"div\", 1);\n          i0.ɵɵelement(9, \"hr\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 4);\n          i0.ɵɵtemplate(11, AllNoozComponent_div_11_Template, 3, 2, \"div\", 9);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.AllNooz);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.AllNooz && ctx.pageNumber >= 1);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedCountryCode);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.AllNooz && ctx.AllNooz.length < 50 && ctx.selectedCountryCode);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.selectedCountryCode);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.countryCodes);\n        }\n      },\n      styles: [\".body[_ngcontent-%COMP%]{overflow:auto;padding-bottom:100px}img[_ngcontent-%COMP%]{width:300px;padding:10px}.profilePic[_ngcontent-%COMP%]{width:40px}.aLinkNoStyle[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit;width:100%}\"]\n    });\n  }\n  return AllNoozComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}